<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Import Members to Firestore</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
    button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; background: #3498db; color: white; }
    button:hover { background: #2980b9; }
    pre { margin-top: 20px; background: #fff; padding: 15px; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
  </style>
</head>
<body>

  <h1>Import Members</h1>
  <p>Click the button below to insert tailored data into Firestore.</p>
  <button id="importBtn">üöÄ Import Data</button>
  <pre id="log"></pre>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { 
      getFirestore, doc, setDoc, collection, query, orderBy, limit, getDocs 
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    // üîë Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyBCVlP2FHFYUszSns9GLgDJXpHwCkknL8w",
      authDomain: "btcuserdb.firebaseapp.com",
      projectId: "btcuserdb",
      storageBucket: "btcuserdb.firebasestorage.app",
      messagingSenderId: "598178558501",
      appId: "1:598178558501:web:613be8d9f986e2885985cc"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const log = document.getElementById("log");

    // üîπ Members dataset
    const members = [
      { memberName:"Member_002", memberEmail:"member_002@testmail.com", dateOfBirth:"1994-02-11", mobileNumber:"80000002", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"CHINESE", currentCredit:3465, dateWhenMembershipStarted:"2016-07-13", dateRegistered:"2016-07-13", dateLastActive:"2025-08-16" },
      { memberName:"Member_003", memberEmail:"member_003@testmail.com", dateOfBirth:"1975-03-24", mobileNumber:"80000003", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"CHINESE", currentCredit:4076, dateWhenMembershipStarted:"2016-09-07", dateRegistered:"2016-09-07", dateLastActive:"2025-08-18" },
      { memberName:"Member_004", memberEmail:"member_004@testmail.com", dateOfBirth:"2001-02-19", mobileNumber:"80000004", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"MALAY", currentCredit:648, dateWhenMembershipStarted:"2016-07-09", dateRegistered:"2016-07-09", dateLastActive:"2025-08-15" },
      { memberName:"Member_005", memberEmail:"member_005@testmail.com", dateOfBirth:"1980-10-21", mobileNumber:"80000005", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"MALAY", currentCredit:2275, dateWhenMembershipStarted:"2016-07-18", dateRegistered:"2016-07-18", dateLastActive:"2025-07-04" },
      { memberName:"Member_006", memberEmail:"member_006@testmail.com", dateOfBirth:"1993-05-08", mobileNumber:"80000006", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"CHINESE", currentCredit:805, dateWhenMembershipStarted:"2016-07-29", dateRegistered:"2016-07-29", dateLastActive:"2025-08-17" },
      { memberName:"Member_007", memberEmail:"member_007@testmail.com", dateOfBirth:"2002-02-14", mobileNumber:"80000007", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"INDIAN", currentCredit:831, dateWhenMembershipStarted:"2016-07-26", dateRegistered:"2016-07-26", dateLastActive:"2025-06-30" },
      { memberName:"Member_008", memberEmail:"member_008@testmail.com", dateOfBirth:"2001-04-16", mobileNumber:"80000008", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"CHINESE", currentCredit:650, dateWhenMembershipStarted:"2016-07-22", dateRegistered:"2016-07-22", dateLastActive:"2025-08-13" },
      { memberName:"Member_009", memberEmail:"member_009@testmail.com", dateOfBirth:"1996-04-11", mobileNumber:"80000009", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"CHINESE", currentCredit:3276, dateWhenMembershipStarted:"2016-07-26", dateRegistered:"2016-07-26", dateLastActive:"2025-08-16" },
      { memberName:"Member_010", memberEmail:"member_010@testmail.com", dateOfBirth:"1970-08-15", mobileNumber:"80000010", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"MALAY", currentCredit:130, dateWhenMembershipStarted:"2016-07-26", dateRegistered:"2016-07-26", dateLastActive:"2025-07-10" },
      { memberName:"Member_011", memberEmail:"member_011@testmail.com", dateOfBirth:"2005-01-20", mobileNumber:"80000011", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"INDIAN", currentCredit:410, dateWhenMembershipStarted:"2016-07-26", dateRegistered:"2016-07-26", dateLastActive:"2025-08-18" },
      { memberName:"Member_012", memberEmail:"member_012@testmail.com", dateOfBirth:"1996-09-10", mobileNumber:"80000012", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"CHINESE", currentCredit:1451, dateWhenMembershipStarted:"2016-08-02", dateRegistered:"2016-08-02", dateLastActive:"2025-08-15" },
      { memberName:"Member_013", memberEmail:"member_013@testmail.com", dateOfBirth:"1999-10-16", mobileNumber:"80000013", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"CHINESE", currentCredit:245, dateWhenMembershipStarted:"2016-08-16", dateRegistered:"2016-08-16", dateLastActive:"2025-08-12" },
      { memberName:"Member_014", memberEmail:"member_014@testmail.com", dateOfBirth:"1992-11-15", mobileNumber:"80000014", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"MALAY", currentCredit:2010, dateWhenMembershipStarted:"2016-10-11", dateRegistered:"2016-10-11", dateLastActive:"2025-07-10" },
      { memberName:"Member_015", memberEmail:"member_015@testmail.com", dateOfBirth:"1979-02-09", mobileNumber:"80000015", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"OTHERS", currentCredit:240, dateWhenMembershipStarted:"2016-10-19", dateRegistered:"2016-10-19", dateLastActive:"2025-06-26" },
      { memberName:"Member_016", memberEmail:"member_016@testmail.com", dateOfBirth:"2005-04-19", mobileNumber:"80000016", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"CHINESE", currentCredit:430, dateWhenMembershipStarted:"2016-10-18", dateRegistered:"2016-10-18", dateLastActive:"2025-08-12" },
      { memberName:"Member_017", memberEmail:"member_017@testmail.com", dateOfBirth:"1997-03-07", mobileNumber:"80000017", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"MALAY", currentCredit:20, dateWhenMembershipStarted:"2016-10-21", dateRegistered:"2016-10-21", dateLastActive:"2025-08-14" },
      { memberName:"Member_018", memberEmail:"member_018@testmail.com", dateOfBirth:"1996-02-03", mobileNumber:"80000018", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"MALAY", currentCredit:575, dateWhenMembershipStarted:"2016-10-26", dateRegistered:"2016-10-26", dateLastActive:"2025-08-13" },
      { memberName:"Member_019", memberEmail:"member_019@testmail.com", dateOfBirth:"1974-07-22", mobileNumber:"80000019", membershipStatus:"FULL MEMBER", gender:"MALE", raceRecode:"INDIAN", currentCredit:155, dateWhenMembershipStarted:"2024-12-11", dateRegistered:"2024-12-11", dateLastActive:"2025-08-18" },
      { memberName:"Member_020", memberEmail:"member_020@testmail.com", dateOfBirth:"1985-04-20", mobileNumber:"80000020", membershipStatus:"FULL MEMBER", gender:"FEMALE", raceRecode:"CHINESE", currentCredit:5, dateWhenMembershipStarted:"2024-12-11", dateRegistered:"2024-12-11", dateLastActive:"2025-06-26" },
      // üîΩ continue with all records up to Member_050 ...
    ];

    // üîπ Add default fields to each member
    members.forEach(m => {
      m.memberPassword = "test123";
      m.memberActivityStatus = "ACTIVE";
      m.membershipTier = "P1M";
    });

    // üîπ Get next incremental ID
    async function getNextId() {
      const membersRef = collection(db, "members");
      const q = query(membersRef, orderBy("imemberid", "desc"), limit(1));
      const snapshot = await getDocs(q);

      if (!snapshot.empty) {
        const lastId = snapshot.docs[0].data().imemberid;
        return lastId + 1;
      }
      return 1; // start at 1 if empty
    }

    // üîπ Import function
    async function importMembers() {
      log.textContent = "‚è≥ Importing data...\n";
      for (const member of members) {
        try {
          const nextId = await getNextId();
          member.imemberid = nextId;

          await setDoc(doc(db, "members", nextId.toString()), member);
          log.textContent += `‚úÖ Inserted ID ${nextId}: ${member.memberName}\n`;
        } catch (err) {
          log.textContent += `‚ùå Error for ${member.memberName}: ${err.message}\n`;
        }
      }
      log.textContent += "üéâ Import finished.";
    }

    document.getElementById("importBtn").addEventListener("click", importMembers);
  </script>
</body>
</html>